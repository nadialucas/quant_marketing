xlab("") +
theme_minimal()
p
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.HYDRO)) +
geom_line(color = "blue") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90), color = "red") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90), color = "yellow") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.DSL), color = "black") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND), color = "green") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW")
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.HYDRO)) +
geom_line(color = "blue") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90), color = "red") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90), color = "yellow") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.DSL), color = "black") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND), color = "green") +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
theme_minimal()
p
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.HYDRO)) +
geom_line() +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90), color = "red") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90), color = "yellow") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.DSL), color = "black") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND), color = "green") +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Y series", values = c("Hydro" = "blue", "CCGT90" = "red",
"CCLE90" = "yellow", "DSL" = "black", "WIND" = "green")) +
theme_minimal()
p
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.HYDRO)) +
geom_line(color = "HYDRO") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90), color = "CCGT90") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90), color = "CCLE90") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.DSL), color = "DSL") +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND), color = "WIND") +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Y series", values = c("HYDRO" = "blue", "CCGT90" = "red",
"CCLE90" = "yellow", "DSL" = "black", "WIND" = "green")) +
theme_minimal()
p
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.HYDRO)) +
geom_line(aes(color = "HYDRO")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90, color = "CCLE90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.DSL, color = "DSL")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Y series", values = c("HYDRO" = "blue", "CCGT90" = "red",
"CCLE90" = "yellow", "DSL" = "black", "WIND" = "green")) +
theme_minimal()
p
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.HYDRO)) +
geom_line(aes(color = "HYDRO")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90, color = "CCLE90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.DSL, color = "DSL")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "GSSUP")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Fuel Type", values = c("HYDRO" = "blue", "CCGT90" = "red",
"CCLE90" = "yellow", "DSL" = "black", "WIND" = "green",
"GSSUP" = "orange")) +
theme_minimal()
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.HYDRO)) +
geom_line(aes(color = "HYDRO")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90, color = "CCLE90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.DSL, color = "DSL")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "GSSUP")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Fuel Type", values = c("HYDRO" = "#CCE1F2", "CCGT90" = "#F5CDDE",
"CCLE90" = "#FBF7D5", "DSL" = "#F9DED7", "WIND" = "#C6F8E5",
"GSSUP" = "#E2BEF1")) +
theme_minimal()
p
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.HYDRO)) +
geom_line(aes(color = "HYDRO")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90, color = "CCLE90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.DSL, color = "DSL")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "GSSUP")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Fuel Type", values = c("HYDRO" = "#96CAF7", "CCGT90" = "#BFB2F3",
"CCLE90" = "#FBF7D5", "DSL" = "#F9DED7", "WIND" = "#C6F8E5",
"GSSUP" = "#E2BEF1")) +
theme_minimal()
p
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.HYDRO)) +
geom_line(aes(color = "HYDRO")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90, color = "CCLE90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.DSL, color = "DSL")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.GSSUP, color = "GSSUP")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.NUC, color = "NUC")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Fuel Type", values = c("HYDRO" = "#96CAF7", "NUC" = "#BFB2F3", "CCGT90" = "#E5E1AB"
"CCLE90" = "#F3C6A5", "DSL" = "#F8A3A8", "WIND" = "#9CDCAA",
"GSSUP" = "#E2BEF1")) +
theme_minimal()
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.HYDRO)) +
geom_line(aes(color = "HYDRO")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90, color = "CCLE90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.DSL, color = "DSL")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.GSSUP, color = "GSSUP")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.NUC, color = "NUC")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Fuel Type", values = c("HYDRO" = "#96CAF7", "NUC" = "#BFB2F3", "CCGT90" = "#E5E1AB",
"CCLE90" = "#F3C6A5", "DSL" = "#F8A3A8", "WIND" = "#9CDCAA",
"GSSUP" = "#E2BEF1")) +
theme_minimal()
p
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.GSSUP)) +
geom_line(aes(color = "GSSUP")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90, color = "CCLE90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.NUC, color = "NUC")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Fuel Type", values = c("HYDRO" = "#BFB2F3", "NUC" = "#96CAF7", "CCGT90" = "#E5E1AB",
"CCLE90" = "#F3C6A5", "WIND" = "#9CDCAA",)) +
theme_minimal()
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.GSSUP)) +
geom_line(aes(color = "GSSUP")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90, color = "CCLE90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.NUC, color = "NUC")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Fuel Type", values = c("HYDRO" = "#BFB2F3", "NUC" = "#96CAF7", "CCGT90" = "#E5E1AB",
"CCLE90" = "#F3C6A5", "WIND" = "#9CDCAA")) +
theme_minimal()
p
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.GSSUP)) +
geom_line(aes(color = "GSSUP")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90, color = "CCLE90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.NUC, color = "NUC")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Fuel Type", values = c("GSSUP" = "#BFB2F3", "NUC" = "#96CAF7", "CCGT90" = "#E5E1AB",
"CCLE90" = "#F3C6A5", "WIND" = "#9CDCAA")) +
theme_minimal()
p
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.GSSUP)) +
geom_line(aes(color = "GSSUP")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCLE90, color = "CCLE90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.HYDRO, color = "HYDRO")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Fuel Type", values = c("GSSUP" = "#BFB2F3", "HYDRO" = "#96CAF7", "CCGT90" = "#E5E1AB",
"CCLE90" = "#F3C6A5", "WIND" = "#9CDCAA")) +
theme_minimal()
p <- ggplot(resources, aes(x=SCED_time, y=SCED_price_weighted.GSSUP)) +
geom_line(aes(color = "GSSUP")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.CCGT90, color = "CCGT90")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.NUC, color = "NUC")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.WIND, color = "WIND")) +
geom_line(aes(x = SCED_time, y = SCED_price_weighted.HYDRO, color = "HYDRO")) +
labs(color = "resource type") +
xlab("Time (2013-2014)") +
ylab("Average bids weighted by MW") +
scale_color_manual(name = "Fuel Type", values = c("GSSUP" = "#BFB2F3", "HYDRO" = "#96CAF7", "CCGT90" = "#E5E1AB",
"NUC" = "#F3C6A5", "WIND" = "#9CDCAA")) +
theme_minimal()
p
ggsave(filename = "/Users/nadialucas/Documents/ercot/data/sced_plot.png", p)
ggsave(filename = "/Users/nadialucas/Documents/ercot/analysis/sced_plot.png", p)
hi = read_parquet(
"/Users/nadialucas/Downloads/chicago.parquet",
col_select = NULL,
as_data_frame = TRUE,
props = ParquetArrowReaderProperties$create(),
...
)
library(arrow)
install.packages("arrow")
library(arrow)
hi = read_parquet(
"/Users/nadialucas/Downloads/chicago.parquet",
col_select = NULL,
as_data_frame = TRUE,
props = ParquetArrowReaderProperties$create(),
...
)
library(arrow)
hi = read_parquet(
"/Users/nadialucas/Downloads/chicago.parquet",
col_select = NULL,
as_data_frame = TRUE,
props = ParquetArrowReaderProperties$create()
)
View(hi)
read.delim("pbout.txt")
cd "/Users/nadialucas/Documents/QuantMarketing/pset1"
set.dir("/Users/nadialucas/Documents/QuantMarketing/pset1")
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
read.delim("pbout.txt")
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw = read.delim("pbout.txt")
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt")
View(pb_raw)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", sep = "\t")
View(pb_raw)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, sep = "\t")
View(pb_raw)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, sep = " ")
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, sep = "  ")
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, sep = "   ")
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, sep = "    ")
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, sep = "\t")
View(pb_raw)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, sep = " ")
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, sep = "/t", dec = ".")
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, sep = "\t", dec = ".")
install.package("readr")
install.packages("readr")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, delim = " ", dec = ".")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read.delim("pbout.txt", header = TRUE, sep = "\t", delim = " ", dec = ".")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_delim("pbout.txt", header = TRUE, delim = " ")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_delim("pbout.txt", delim = " ")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_delim("pbout.txt", delim = " ")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_delim("pbout.txt", delim = "\t")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_tsv("pbout.txt")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_tsv("pbout.txt", sep = " ")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_tsv("pbout.txt", delim = " ")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_tsv("pbout.txt")
library(readr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_table("pbout.txt")
library(dplyr)
install.packages("dplyr")
library(dplyr)
remove.packages("rlang")
install.packages("rlang")
library(rlang)
remove.packages("rlang")
remove.packages("dplyr")
install.packages("rlang")
install.packages("dplyr")
library(rlang)
library(dplyr)
library(readr)
library(dplyr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_table("pbout.txt")
# Compute what you consider the relevant descriptive statistics by product alternative and report them in a table
### total mkt share (by panelist/trip)
### avg # of brands purchased by each hh
### avg expenditure per hh
### expenditure rank
### fraction of trips that pb is purchased during
### avg price purchased
# first clean the data, so add a 1-9 on each of the panelist/weeks
pb_cleaned -> pb_raw %>% group_by(panelid, date) %>% mutate(choice_alternative = row_number())
library(readr)
library(dplyr)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_table("pbout.txt")
# Compute what you consider the relevant descriptive statistics by product alternative and report them in a table
### total mkt share (by panelist/trip)
### avg # of brands purchased by each hh
### avg expenditure per hh
### expenditure rank
### fraction of trips that pb is purchased during
### avg price purchased
# first clean the data, so add a 1-9 on each of the panelist/weeks
pb_cleaned -> pb_raw %>% group_by(panelid, date) %>% mutate(choice_alternative = row_number())
pb_cleaned <- pb_raw %>% group_by(panelid, date) %>% mutate(choice_alternative = row_number())
View(pb_cleaned)
pb_avg_prices <- pb_raw %>% group_by(choice_alternative) %>% mutate(mean_price = mean(price))
pb_avg_prices <- pb_cleaned %>% group_by(choice_alternative) %>% mutate(mean_price = mean(price))
pb_avg_prices
### avg price of alternative in general
pb_avg_prices <- pb_cleaned %>% group_by(choice_alternative) %>% mutate(mean_price = mean(price))
pb_avg_prices_condl_purchased <- pb_cleaned %>% filter(choice == choice_alternative) %>% mutate(mean_price = mean(price))
View(pb_avg_prices_condl_purchased)
install.packages("psych")
library(readr)
library(dplyr)
library(psych)
library(psych)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_table("pbout.txt")
pb_cleaned <- pb_raw %>%
group_by(panelid, date) %>%
mutate(choice_alternative = row_number()) %>%
mutate(avg_price = mean(price))
### avg price of alternative in general
# ok and also collapse these down to product level for the future
pb_avg_prices <- pb_cleaned %>% group_by(choice_alternative) %>% mutate(mean_price = mean(price))
pb_avg_prices_condl_purchased <- pb_cleaned %>% filter(choice == choice_alternative) %>% mutate(mean_price = mean(price))
describe(pb_avg_prices_condl_purchased)
describeBy(pb_avg_prices_condl_purchased, group = pb_avg_prices_condl_purchased$choice)
pb_cleaned <- pb_raw %>%
group_by(panelid, date) %>%
mutate(choice_alternative = row_number()) %>%
mutate(avg_price = mean(price)) %>%
mutate(chosen = ifelse(choice == choice_alternative, 1, 0))
lmout = lm(chosen ~ price, data = pb_cleaned)
names(lmout)
print(lmout)
summary(lmout)
ls()
library(bayesm)
install.packages("bayesm")
library(bayesm)
data(bank)
View(bank)
View(bank$choiceAtt)
rhierBinLogit()
rhierBinLogit
data(bank)
choiceAtt = bank$choiceAtt
Z = bank$demo
Z[,1] = rep(1, nrow(Z))
Z[,2] = Z[,2] - mean(Z[,2])
Z[,3] = Z[,3] - mean(Z[,3])
Z[,4] = Z[,4] - mean(Z[,4])
Z = as.matrix(Z)
hh = levels(factor(choiceAtt$id))
nhh = length(hh)
lgtdata = NULL
for (i in 1:nhh) {
y = choiceAtt[choiceAtt[,1] == hh[i], 2]
nobs = length(y)
X = as.matrix(choiceAtt[choiceAtt[,1]==hh[i], c(3:16)])
lgtdata[[i]] = list(y=y, X=X)
}
cat("Finished Reading data", fill = TRUE)
fsh()
Data = list(lgtdata = lgtdata, Z=Z)
Mcmc = list(R = 20000, sbeta = .2, keep = 20)
out = rhierBinLog(Data = Data, Mcmc = Mcmc)
out = rhierBinLogit(Data = Data, Mcmc = Mcmc)
View(lgtdata)
View(Z)
View(Data)
View(X)
out = rhierMnlRwMixture(Data = Data, Mcmc = Mcmc)
# load the data from 'pbout.txt' in R
library(readr)
library(dplyr)
library(psych)
library(bayesm)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_table("pbout.txt")
# Compute what you consider the relevant descriptive statistics by product alternative and report them in a table
### total mkt share (by panelist/trip)
### avg # of brands purchased by each hh
### avg expenditure per hh
### expenditure rank
### fraction of trips that pb is purchased during
### avg price of alternative purchased
### avg price of alternative in general
# first clean the data, so add a 1-9 on each of the panelist/weeks
pb_cleaned <- pb_raw %>%
group_by(panelid, date) %>%
mutate(choice_alternative = row_number()) %>%
mutate(avg_price = mean(price)) %>%
mutate(chosen = ifelse(choice == choice_alternative, 1, 0))
### avg price of alternative in general
# ok and also collapse these down to product level for the future
pb_avg_prices <- pb_cleaned %>% group_by(choice_alternative) %>% mutate(mean_price = mean(price))
pb_avg_prices_condl_purchased <- pb_cleaned %>% filter(choice == choice_alternative) %>% mutate(mean_price = mean(price))
# do we want date fixed effects?
### total mkt share (by panelist/trip)
describe(pb_avg_prices_condl_purchased)
describeBy(pb_avg_prices_condl_purchased, group = pb_avg_prices_condl_purchased$choice)
lmout = lm(chosen ~ price, data = pb_cleaned)
summary(lmout)
#playing around with bayesm
data(bank)
choiceAtt = bank$choiceAtt
Z = bank$demo
Z[,1] = rep(1, nrow(Z))
Z[,2] = Z[,2] - mean(Z[,2])
Z[,3] = Z[,3] - mean(Z[,3])
Z[,4] = Z[,4] - mean(Z[,4])
Z = as.matrix(Z)
hh = levels(factor(choiceAtt$id))
nhh = length(hh)
lgtdata = NULL
for (i in 1:nhh) {
print(i)
y = choiceAtt[choiceAtt[,1] == hh[i], 2]
nobs = length(y)
X = as.matrix(choiceAtt[choiceAtt[,1]==hh[i], c(3:16)])
lgtdata[[i]] = list(y=y, X=X)
}
cat("Finished Reading data", fill = TRUE)
Data = list(lgtdata = lgtdata, Z=Z)
Mcmc = list(R = 20000, sbeta = .2, keep = 20)
out = rhierMnlRwMixture(Data = Data, Mcmc = Mcmc)
print(lgtdata[[946]])
# load the data from 'pbout.txt' in R
library(readr)
library(dplyr)
library(psych)
library(bayesm)
setwd("/Users/nadialucas/Documents/QuantMarketing/pset1")
pb_raw <- read_table("pbout.txt")
# Compute what you consider the relevant descriptive statistics by product alternative and report them in a table
### total mkt share (by panelist/trip)
### avg # of brands purchased by each hh
### avg expenditure per hh
### expenditure rank
### fraction of trips that pb is purchased during
### avg price of alternative purchased
### avg price of alternative in general
# first clean the data, so add a 1-9 on each of the panelist/weeks
pb_cleaned <- pb_raw %>%
group_by(panelid, date) %>%
mutate(choice_alternative = row_number()) %>%
mutate(avg_price = mean(price)) %>%
mutate(chosen = ifelse(choice == choice_alternative, 1, 0))
### avg price of alternative in general
# ok and also collapse these down to product level for the future
pb_avg_prices <- pb_cleaned %>% group_by(choice_alternative) %>% mutate(mean_price = mean(price))
pb_avg_prices_condl_purchased <- pb_cleaned %>% filter(choice == choice_alternative) %>% mutate(mean_price = mean(price))
# do we want date fixed effects?
### total mkt share (by panelist/trip)
describe(pb_avg_prices_condl_purchased)
describeBy(pb_avg_prices_condl_purchased, group = pb_avg_prices_condl_purchased$choice)
lmout = lm(chosen ~ price, data = pb_cleaned)
summary(lmout)
#playing around with bayesm
data(bank)
choiceAtt = bank$choiceAtt
Z = bank$demo
Z[,1] = rep(1, nrow(Z))
Z[,2] = Z[,2] - mean(Z[,2])
Z[,3] = Z[,3] - mean(Z[,3])
Z[,4] = Z[,4] - mean(Z[,4])
Z = as.matrix(Z)
hh = levels(factor(choiceAtt$id))
nhh = length(hh)
lgtdata = NULL
for (i in 1:nhh) {
y = choiceAtt[choiceAtt[,1] == hh[i], 2]
nobs = length(y)
X = as.matrix(choiceAtt[choiceAtt[,1]==hh[i], c(3:16)])
lgtdata[[i]] = list(y=y, X=X)
}
cat("Finished Reading data", fill = TRUE)
Data = list(lgtdata = lgtdata, Z=Z, p = 14)
Mcmc = list(R = 20000, sbeta = .2, keep = 20)
out = rhierMnlRwMixture(Data = Data, Mcmc = Mcmc)
